(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"076e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[t._v("19302010068@fudan.edu.cn")])},a=[],s={name:"v-footer"},r=s,o=(n("5b55"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"0936cf23",null);e["a"]=c.exports},"0797":function(t,e,n){},"16d7":function(t,e,n){},1965:function(t,e,n){"use strict";var i=n("7569"),a=n.n(i);a.a},"2a0a":function(t,e,n){},"307a":function(t,e,n){},"352f":function(t,e,n){"use strict";var i=n("a238"),a=n.n(i);a.a},"540d":function(t,e,n){},"5b55":function(t,e,n){"use strict";var i=n("16d7"),a=n.n(i);a.a},"5e23":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.total>1?n("nav",[n("div",{staticClass:"numbers"},[t._l(t.numbers,(function(e){return[e?n("input",{class:{current:e===t.current},attrs:{type:"button",value:e},on:{click:function(n){return t.filteredFetch(e)}}}):n("span",[t._v("...")])]}))],2),n("div",{staticClass:"operations"},[n("input",{attrs:{type:"button",value:"< Prev"},on:{click:function(e){return t.filteredFetch(t.current-1)}}}),n("input",{attrs:{type:"button",value:"Next >"},on:{click:function(e){return t.filteredFetch(t.current+1)}}}),n("label",[n("span",[t._v("Go to page:")]),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.toPage,expression:"toPage",modifiers:{number:!0}}],attrs:{type:"number",min:1,max:t.total},domProps:{value:t.toPage},on:{input:function(e){e.target.composing||(t.toPage=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("input",{attrs:{type:"button",value:"Go"},on:{click:function(e){return t.filteredFetch(t.toPage)}}})])])]):t._e()},a=[],s=n("1157"),r=n.n(s),o=n("2ef0"),c=n.n(o);const u=8,l=2;var d={name:"v-pages",props:{photos:Array},data:function(){return{current:void 0,toPage:void 0}},computed:{total:function(){return c.a.ceil(this.photos.length/u)},numbers:function(){return c()(this.current-l).range(this.current+l+1).concat(1,this.total).filter(this.inRange).sortBy().sortedUniq().flatMap((t,e,n)=>0!==e&&t-n[e-1]!==1?[!1,t]:t).value()}},mounted:function(){this.current=1,this.toPage=1,this.fetch(this.current)},methods:{inRange(t){return c.a.inRange(t,1,this.total+1)},fetch(t){let e=e=>{this.$emit("fetch-photos",e),this.current=t};0===this.total?e([]):r.a.ajax({method:"GET",url:syt.backend+"/photo-overviews",xhrFields:{withCredentials:!0},data:{images:c.a.slice(this.photos,(t-1)*u,t*u)},dataType:"json",success:e})},filteredFetch(t){this.inRange(t)&&t!==this.current&&this.fetch(t)}},watch:{photos(){this.current=c.a.clamp(this.current,1,this.total),this.fetch(this.current)}}},p=d,f=(n("bbd0"),n("2877")),h=Object(f["a"])(p,i,a,!1,null,"e3b97de2",null);e["a"]=h.exports},"5eba":function(t,e,n){"use strict";var i=n("e777"),a=n.n(i);a.a},6868:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.paragraphs,(function(e,i){return n("p",{style:i?t.other:t.first},[t._v(t._s(e))])})),0)},a=[],s=n("2ef0"),r=n.n(s),o={name:"v-description",props:{description:String,lineHeight:String,marginTop:String},data:function(){return{first:{lineHeight:this.lineHeight},other:{lineHeight:this.lineHeight,marginTop:this.marginTop+"rem"}}},computed:{paragraphs:function(){return r.a.split(this.description,/\r\n|\r|\n/)}}},c=o,u=n("2877"),l=Object(u["a"])(c,i,a,!1,null,"49d6e5aa",null);e["a"]=l.exports},6943:function(t,e,n){"use strict";var i=n("ed1b"),a=n.n(i);a.a},"71c2":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("div",{staticClass:"info"},[t.logged?n("div",[t._v("Logged in as "),n("strong",[t._v(t._s(t.logged))])]):t._e(),n("div",[n("v-time")],1)]),n("h1",[t._v("Share Your Travels")]),n("nav",[n("ul",{staticClass:"site"},[t._l(t.site,(function(e){return n("li",[n("a",{class:{strong:t.location===e.href},attrs:{href:e.href}},[t._v(t._s(e.title))])])})),t.logged?t._e():n("li",[n("a",{class:{strong:"/login"===t.location},attrs:{href:"/login"},on:{click:t.setLoginRedirect}},[t._v("Login")])])],2),t.logged?n("div",{staticClass:"user"},[n("span",[t._v("Me")]),n("ul",t._l(t.user,(function(e){return n("li",[n("a",{attrs:{href:e.href}},[t._v(t._s(e.title))])])})),0)]):t._e()])])},a=[],s=n("1157"),r=n.n(s),o=n("c36d"),c={name:"v-header",components:{VTime:o["a"]},props:{location:String},data:function(){return{logged:void 0,site:[{href:"/",title:"Home"},{href:"/search",title:"Search"}],user:[{href:"/favourites",title:"Favourites"},{href:"/upload",title:"Upload"},{href:"/photos",title:"My photos"},{href:"/friends",title:"Friends"},{href:"/account",title:"Account"}]}},mounted:function(){r.a.ajax({method:"GET",url:syt.backend+"/logged",xhrFields:{withCredentials:!0},dataType:"json",success:t=>{"no"===t?(this.logged=!1,syt.logged=this.logged):"yes"===t[0]&&(this.logged=t[1],syt.logged=this.logged),this.$emit("logged")}})},methods:{setLoginRedirect(){sessionStorage.setItem("loginRedirect",location.toString().match(/.*(\/.*)/)[1])}}};window.syt={backend:"https://39.100.72.5"};var u=c,l=(n("d9e3"),n("2877")),d=Object(l["a"])(u,i,a,!1,null,"c6272f64",null);e["a"]=d.exports},7569:function(t,e,n){},"7af4":function(t,e,n){},8688:function(t,e,n){"use strict";var i=n("2a0a"),a=n.n(i);a.a},"89f5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",[n("p",[t._t("default")],2),n("input",{class:{action:t.defaultResult},attrs:{type:"button",value:"Yes"},on:{click:function(e){return t.dismiss(!0)}}}),n("input",{class:{action:!t.defaultResult},attrs:{type:"button",value:"No"},on:{click:function(e){return t.dismiss(!1)}}})]):t._e()},a=[],s={name:"confirm-box",props:{show:Boolean,result:Boolean,defaultResult:Boolean},methods:{dismiss(t){this.$emit("update:show",!1),this.$emit("update:result",t)}}},r=s,o=(n("352f"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"3caad669",null);e["a"]=c.exports},9310:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAQAAAC1QeVaAAAA3UlEQVQY02NgIB5Irsctpa/9X9IfwWdCluRN5WAQisAhyR7AwMDoLckP4zMyMEjGM0xgEGBgYGAQZ2Bm+MfwiuEfAwMDwweGAmYGhs8v1S/eMOIQ4mVgYmBgYGTgYeBlkLiTX71sJwMDAwPDf47/JqGrjf/DYOjq/yb/eaB2Mv5gPKO6EGE3217GM4xfkBy0xoOBgYGB/QUDAwPDBXs017IHMDBoLjgaaDSFgYHRG837Zs/mJf9XYGD4LzMv2eYWclAwuFlecvnPA2H/5znnEGWPJPmf5z8LEo8FohAABwQ5f/rIyEoAAAAASUVORK5CYII="},"9c6f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[n("span",[t._v("Country/Region")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.country__,expression:"country__"}],attrs:{required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.country__=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("-- Choose an option --")]),t._l(t.countries,(function(e,i){return n("optgroup",{attrs:{label:i}},t._l(e,(function(e){return n("option",{domProps:{value:e.countryCode}},[t._v(t._s(e.countryName))])})),0)}))],2)]),t.country__?n("label",[n("span",[t._v("City")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.city__,expression:"city__"}],attrs:{type:"text",list:"city",pattern:t.pattern,required:""},domProps:{value:t.city__},on:{input:function(e){e.target.composing||(t.city__=e.target.value)}}}),n("datalist",{attrs:{id:"city"}},t._l(t.cities,(function(e){return n("option",{key:e.cityID},[t._v(t._s(e.cityName))])})),0)]):t._e()])},a=[],s=n("1157"),r=n.n(s),o=n("2ef0"),c=n.n(o),u={name:"location-select",props:{country:String,city:Number,cityName:String},data:function(){return this.country&&this.city&&this.cityName?{country__:this.country,countries:void 0,city__:this.cityName,cities:[{cityID:this.city,cityName:this.cityName}],pattern:".*"}:{country__:"",countries:void 0,city__:"",cities:void 0,pattern:""}},mounted:function(){r.a.ajax({method:"GET",url:syt.backend+"/countries",xhrFields:{withCredentials:!0},dataType:"json",success:t=>{this.countries=t}})},methods:{fetchCities:c.a.debounce((function(){r.a.ajax({method:"GET",url:syt.backend+"/cities",xhrFields:{withCredentials:!0},data:{cityName:this.city__,countryCode:this.country__},dataType:"json",success:t=>{this.cities=c.a.flatMap(t,c()(c.a.sortBy).partialRight("cityName").unary().value())}})}),500)},watch:{country__(t){this.$emit("update:country",t),this.city__=""},city__(){this.$emit("update:city",0),this.pattern="",this.fetchCities()},cities(){let t=c.a.find(this.cities,{cityName:this.city__});void 0!==t&&(this.$emit("update:city",t.cityID),this.pattern=".*")}}},l=u,d=(n("5eba"),n("2877")),p=Object(d["a"])(l,i,a,!1,null,"5a9ee2fe",null);e["a"]=p.exports},a238:function(t,e,n){},ad46:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("Content")]),n("span",[t._v("You can specify up to 4 tags here, in order. At least one is required.")]),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.content1,expression:"content1"}],attrs:{type:"text",pattern:t.pattern,required:t.required},domProps:{value:t.content1},on:{input:function(e){e.target.composing||(t.content1=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content2,expression:"content2"}],attrs:{type:"text"},domProps:{value:t.content2},on:{input:function(e){e.target.composing||(t.content2=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content3,expression:"content3"}],attrs:{type:"text"},domProps:{value:t.content3},on:{input:function(e){e.target.composing||(t.content3=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.content4,expression:"content4"}],attrs:{type:"text"},domProps:{value:t.content4},on:{input:function(e){e.target.composing||(t.content4=e.target.value)}}})])])},a=[],s=n("2ef0"),r=n.n(s),o={name:"contents-input",props:{contents:Array},data:function(){return{content1:r.a.defaultTo(this.contents[0],""),content2:r.a.defaultTo(this.contents[1],""),content3:r.a.defaultTo(this.contents[2],""),content4:r.a.defaultTo(this.contents[3],"")}},computed:{contents__:function(){return r()([this.content1,this.content2,this.content3,this.content4]).map(r.a.unary(r.a.trim)).compact().value()},required:function(){return r.a.isEmpty(this.contents__)},pattern:function(){return this.required?"":".*"}},watch:{contents__(){this.$emit("update:contents",this.contents__)}}},c=o,u=(n("1965"),n("2877")),l=Object(u["a"])(c,i,a,!1,null,"672d69f4",null);e["a"]=l.exports},bbd0:function(t,e,n){"use strict";var i=n("540d"),a=n.n(i);a.a},bf27:function(t,e,n){"use strict";var i=n("307a"),a=n.n(i);a.a},c36d:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("time",[t._v(t._s(t.time))])},a=[],s=n("2ef0"),r=n.n(s);let o=t=>{t=r.a.defaultTo(t,r.a.now());let e=new Date(t).toUTCString().match(/^(\w+, \w+ \w+ \w+)( \w+:\w+)/);return e[1]+","+e[2]};var c={name:"v-time",props:{time__:Number},data:function(){return{time:o(this.time__)}}},u=c,l=n("2877"),d=Object(l["a"])(u,i,a,!1,null,"12780e09",null);e["a"]=d.exports},d066:function(t,e,n){"use strict";var i=n("7af4"),a=n.n(i);a.a},d4f5:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default")],2)},a=[],s={name:"form-styles"},r=s,o=(n("6943"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"28effc7a",null);e["a"]=c.exports},d9e3:function(t,e,n){"use strict";var i=n("0797"),a=n.n(i);a.a},e385:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",[n("span",[t._v("Visibility")]),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.visibility__,expression:"visibility__",modifiers:{number:!0}}],attrs:{required:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var n="_value"in e?e._value:e.value;return t._n(n)}));t.visibility__=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:void 0}},[t._v("-- Choose an option --")]),n("option",{attrs:{value:"1"}},[t._v("Public")]),n("option",{attrs:{value:"2"}},[t._v("Friends")]),n("option",{attrs:{value:"3"}},[t._v("Private")])]),t.visibility__>t.initial?n("span",[n("span",[t._v("WARNING: ")]),t._v("You are attempting to switch to weaker access privileges. The photo's star count may drop if someone previously starred your photo is prevented from viewing it. Comments will not be deleted, though.")]):t._e()])},a=[],s=n("2ef0"),r=n.n(s),o={name:"visibility-select",props:{visibility:Number},data:function(){return{initial:r.a.defaultTo(this.visibility,3),visibility__:this.visibility}},watch:{visibility__(t){this.$emit("update:visibility",t)}}},c=o,u=(n("d066"),n("2877")),l=Object(u["a"])(c,i,a,!1,null,"52f924d6",null);e["a"]=l.exports},e777:function(t,e,n){},ed1b:function(t,e,n){},f37b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",{attrs:{type:"file"},on:{change:function(e){return t.change(e)}}})},a=[],s={name:"file-input",props:{file:File},methods:{change(t){this.$emit("update:file",t.target.files[0])}}},r=s,o=(n("bf27"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"1dd60218",null);e["a"]=c.exports},f4d7:function(t,e,n){},f52b:function(t,e,n){"use strict";var i=n("f4d7"),a=n.n(i);a.a},f569:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[0===t.photos.length?n("p",[t._t("default")],2):t._l(t.photos,(function(e){return n("v-overview",{key:e.imageID,attrs:{photo:e}},[t._t("operations")],2)}))],2)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",[t.photo?[n("div",{staticClass:"image"},[n("a",{attrs:{href:t.href}},[n("img",{class:t.cls,style:t.margin,attrs:{src:t.src,alt:t.photo.path},on:{load:function(e){return t.resize(e)}}})])]),n("div",{staticClass:"title"},[n("h3",[t._v(t._s(t.photo.title))]),t._t("default")],2),n("v-description",{staticClass:"description",attrs:{description:t.photo.description,"line-height":"1.2","margin-top":"0"}})]:n("div",{staticClass:"title"},[n("h3",[t._v("404 Not Found")])])],2)},r=[],o=n("6868");const c=200;var u={name:"v-overview",components:{VDescription:o["a"]},props:{photo:Object},data:function(){return{cls:"",margin:""}},computed:{href:function(){return"/details?image="+this.photo.imageID},src:function(){return syt.backend+"/img/"+this.photo.path}},methods:{resize(t){let e=t.target;if(e.naturalWidth>e.naturalHeight){this.cls="landscape";let t=c*(1-e.naturalWidth/e.naturalHeight)/2;this.margin="margin-left: "+t+"px"}else{this.cls="portrait";let t=c*(1-e.naturalHeight/e.naturalWidth)/2;this.margin="margin-top: "+t+"px"}}}},l=u,d=(n("f52b"),n("2877")),p=Object(d["a"])(l,s,r,!1,null,"395393b4",null),f=p.exports,h={name:"v-result",components:{VOverview:f},props:{photos:Array}},m=h,v=Object(d["a"])(m,i,a,!1,null,"40d93f3a",null);e["a"]=v.exports},f771:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"message-box"}},[t.message?n("p",{domProps:{innerHTML:t._s(t.message)},on:{click:t.dismiss}}):t._e()])},a=[],s=n("2ef0"),r=n.n(s);let o=r.a.debounce((function(){this.$data.__message__=""}),5e3);var c={name:"message-box",data:function(){return{__message__:""}},computed:{message:{get(){return this.$data.__message__},set(t){this.$data.__message__=t,this.timer()}}},methods:{timer:o,dismiss(){o.flush()}},mounted:function(){let t=sessionStorage.getItem("messageBox");null!==t&&(sessionStorage.removeItem("messageBox"),this.message=t)}},u=c,l=(n("8688"),n("2877")),d=Object(l["a"])(u,i,a,!1,null,"96d83b16",null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-common.8ab2494e.js.map