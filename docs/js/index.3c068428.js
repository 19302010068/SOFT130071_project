(function(t){function e(e){for(var n,i,A=e[0],o=e[1],g=e[2],E=0,u=[];E<A.length;E++)i=A[E],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);c&&c(e);while(u.length)u.shift()();return a.push.apply(a,g||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,A=1;A<s.length;A++){var o=s[A];0!==r[o]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},r={index:0},a=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var A=window["webpackJsonp"]=window["webpackJsonp"]||[],o=A.push.bind(A);A.push=e,A=A.slice();for(var g=0;g<A.length;g++)e(A[g]);var c=o;a.push([7,"chunk-vendors","chunk-common"]),s()})({"0d19":function(t,e,s){"use strict";var n=s("8032"),r=s.n(n);r.a},2847:function(t,e,s){"use strict";var n=s("f5b1"),r=s.n(n);r.a},5779:function(t,e,s){"use strict";s.r(e);var n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"v"}},[s("v-header",{attrs:{location:"/"}}),s("message-box"),s("main",[s("section",[s("h2",[t._v("Featured photos")]),t.featured?s("v-carousel",{key:"1",attrs:{images__:t.featured}}):s("v-carousel",{key:"0"})],1),s("hr"),s("section",[s("h2",[t._v("Latest photos")]),t._l(t.latest,(function(e){return s("v-summary",t._b({key:e.imageID},"v-summary",e,!1))}))],2)]),s("v-footer")],1)},a=[],i=s("1157"),A=s.n(i),o=s("71c2"),g=s("f771"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"carousel",on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[s("input",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],attrs:{type:"button",value:"<"},on:{click:t.left}}),s("transition-group",{attrs:{name:t.direction>0?"right":"left"}},t._l(t.images,(function(e,n){return s("div",{directives:[{name:"show",rawName:"v-show",value:n===t.active,expression:"index === active"}],key:e.id,staticClass:"image"},[s("a",{attrs:{href:e.href}},[s("img",{class:e.cls,attrs:{src:e.src,alt:e.alt},on:{load:function(e){return t.resize(e)}}})])])})),0),s("input",{directives:[{name:"show",rawName:"v-show",value:t.hover,expression:"hover"}],attrs:{type:"button",value:">"},on:{click:t.right}})],1)},E=[],u=s("2ef0"),l=s.n(u);let B=t=>l.a.map(t,t=>({id:t.imageID,href:"/details?image="+t.imageID,src:syt.backend+"/img/"+t.path,alt:t.path,cls:""})),Q=l.a.debounce((function(){this.active+=this.direction,this.active in this.images||(this.active-=this.direction*this.images.length),this.slide()}),3e3);var I={name:"v-carousel",props:{images__:Array},data:function(){return{images:B(this.images__),hover:!1,active:0,direction:1}},mounted:function(){this.slide()},methods:{resize(t){let e=t.target,s=e.naturalWidth/e.naturalHeight>16/9?"landscape":"portrait";l.a.find(this.images,t=>t.alt===e.alt).cls=s},slide:Q,left:l.a.throttle((function(){this.direction=-1,Q.flush()}),500),right:l.a.throttle((function(){this.direction=1,Q.flush()}),500)}},d=I,f=(s("0d19"),s("2877")),h=Object(f["a"])(d,c,E,!1,null,"0a4f5ab8",null),x=h.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",[s("div",{staticClass:"image"},[s("a",{attrs:{href:"/details?image="+t.imageID}},[s("img",{class:t.cls,style:t.margin,attrs:{src:t.src,alt:t.path},on:{load:function(e){return t.resize(e)}}})])]),s("div",{staticClass:"author"},[s("a",{attrs:{href:"/browse?author="+t.uID}},[t._v(t._s(t.author))])]),s("div",{staticClass:"contents"},[t._l(t.contents,(function(e,n){return[n?[t._v(" | ")]:t._e(),s("a",{attrs:{href:"/browse?content="+t.escape(e)}},[t._v(t._s(e))])]}))],2),s("v-time",{attrs:{time__:t.uploaded}})],1)},y=[],m=s("c36d");const D=200;var p={name:"v-summary",components:{VTime:m["a"]},data:function(){return{cls:"",margin:""}},props:{imageID:Number,path:String,uID:Number,author:String,content1:String,content2:String,content3:String,content4:String,uploaded:Number},computed:{src:function(){return syt.backend+"/img/"+this.path},contents:function(){return l.a.compact([this.content1,this.content2,this.content3,this.content4])}},methods:{resize(t){let e=t.target;if(e.naturalWidth>e.naturalHeight){this.cls="landscape";let t=D*(1-e.naturalWidth/e.naturalHeight)/2;this.margin="margin-left: "+t+"px"}else{this.cls="portrait";let t=D*(1-e.naturalHeight/e.naturalWidth)/2;this.margin="margin-top: "+t+"px"}},escape(t){return encodeURIComponent(t)}}},v=p,k=(s("2847"),Object(f["a"])(v,S,y,!1,null,"0fe94315",null)),O=k.exports,L=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},H=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("a",{attrs:{href:"https://github.com/19302010068"}},[n("img",{attrs:{src:s("ed53"),alt:"19302010068"}})]),t._v("19302010068@fudan.edu.cn")])}],b={name:"v-footer"},C=b,_=(s("c97f"),Object(f["a"])(C,L,H,!1,null,"fe0cb456",null)),M=_.exports,w={name:"v",components:{VHeader:o["a"],MessageBox:g["a"],VCarousel:x,VSummary:O,VFooter:M},data:function(){return{featured:void 0,latest:void 0}},mounted:function(){A.a.ajax({method:"GET",url:syt.backend+"/featured-photos",xhrFields:{withCredentials:!0},dataType:"json",success:t=>{this.featured=t}}),A.a.ajax({method:"GET",url:syt.backend+"/latest-photos",xhrFields:{withCredentials:!0},dataType:"json",success:t=>{this.latest=t}})}},J=w,j=(s("e822"),Object(f["a"])(J,r,a,!1,null,"6930ee34",null)),Z=j.exports;n["a"].config.productionTip=!1,new n["a"]({render:t=>t(Z)}).$mount("#v")},"650c":function(t,e,s){},7:function(t,e,s){t.exports=s("5779")},"7c77":function(t,e,s){},8032:function(t,e,s){},c97f:function(t,e,s){"use strict";var n=s("7c77"),r=s.n(n);r.a},e822:function(t,e,s){"use strict";var n=s("650c"),r=s.n(n);r.a},ed53:function(t,e){t.exports="data:image/png;base64,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"},f5b1:function(t,e,s){}});
//# sourceMappingURL=index.3c068428.js.map