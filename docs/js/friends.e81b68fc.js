(function(e){function t(t){for(var r,o,i=t[0],u=t[1],d=t[2],c=0,f=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==s[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},s={friends:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var l=u;a.push([6,"chunk-vendors","chunk-common"]),n()})({"14a4":function(e,t,n){},2611:function(e,t,n){"use strict";var r=n("14a4"),s=n.n(r);s.a},4663:function(e,t,n){},6:function(e,t,n){e.exports=n("8bb0")},"85f6":function(e,t,n){"use strict";var r=n("4663"),s=n.n(r);s.a},"8bb0":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"v"}},[n("v-header",{attrs:{location:"/friends"},on:{logged:e.logged}}),n("message-box"),n("main",[n("h2",[e._v("Friends")]),n("add-friend"),n("hr"),n("friend-list"),n("v-requests")],1),n("v-footer")],1)},a=[],o=n("71c2"),i=n("f771"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("form",{attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.addFriend(t)}}},[n("label",[n("span",[e._v("Username")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Enter a friend's username in full",required:""},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),n("label",[n("span",[e._v("Message")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text",placeholder:"Add a message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),n("input",{staticClass:"action",attrs:{type:"submit",value:"Add friend"}})]),e._m(0)])},d=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("This will send a friend request to the user. If they accept your request then you are added to their list and they will be added to your list.")]),n("p",[e._v("You will see friend requests at the bottom of this web page (if there is any).")])])}],l=n("1157"),c=n.n(l),f=n("2ef0"),m=n.n(f);let p=m.a.once(()=>c()("#message-box")[0].__vue__);var h={name:"add-friend",data:function(){return{username:"",message:""}},methods:{addFriend(){c.a.ajax({method:"POST",url:syt.backend+"/add-friend",xhrFields:{withCredentials:!0},data:{username:this.username,message:this.message?this.message:void 0},dataType:"text",success:e=>{switch("unauthorized"!==e&&(this.username="",this.message=""),e){case"ok":p().message="Your request has been successfully sent";break;case"unauthorized":p().message="The username you entered does not exist";break;case"already":p().message="They are already your friend";break;case"self":p().message="You can view your own info on Account page :)";break}}})}}},v=h,b=(n("85f6"),n("2877")),g=Object(b["a"])(v,u,d,!1,null,"53e03707",null),_=g.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",[e.empty?e._e():n("tr",[n("th"),n("th",[e._v("Username")]),n("th",[e._v("Email")]),n("th",[e._v("Joined")])]),e._l(e.friends,(function(t,r){return n("tr",{on:{click:function(n){return e.visit(t.uID)}}},[n("td",[e._v(e._s(r+1))]),n("td",[e._v(e._s(t.username))]),n("td",[e._v(e._s(t.email))]),n("td",[n("v-time",{attrs:{time__:t.joined}})],1)])}))],2)},w=[],x=n("c36d"),j={name:"friend-list",components:{VTime:x["a"]},data:function(){return{friends:void 0}},computed:{empty:function(){return m.a.isEmpty(this.friends)}},mounted:function(){c.a.ajax({method:"GET",url:syt.backend+"/friend-list",xhrFields:{withCredentials:!0},dataType:"json",success:e=>{this.friends=e}})},methods:{visit(e){window.location="/friend?friend="+e}}},k=j,T=(n("ed23"),Object(b["a"])(k,y,w,!1,null,"62483134",null)),O=T.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dl",[e._l(e.requests,(function(t){return[n("dt",[n("span",[e._v(e._s(t.username))]),n("input",{attrs:{type:"button",value:"Accept"},on:{click:function(n){return e.respondTo(t.uID,!0)}}}),n("input",{attrs:{type:"button",value:"Reject"},on:{click:function(n){return e.respondTo(t.uID,!1)}}})]),t.message?n("dd",[e._v(e._s(t.message))]):e._e()]}))],2)},P=[];let E=m.a.once(()=>c()("table")[0].__vue__);var F={name:"v-requests",data:function(){return{requests:void 0}},mounted:function(){c.a.ajax({method:"GET",url:syt.backend+"/friend-requests",xhrFields:{withCredentials:!0},dataType:"json",success:e=>{this.requests=e}})},methods:{respondTo(e,t){c.a.ajax({method:"POST",url:syt.backend+"/confirm-friend",xhrFields:{withCredentials:!0},data:{friend:e,action:t?"accept":"reject"},dataType:"json",success:n=>{"ok"!==n&&"ok"!==n[0]||(m.a.pullAllBy(this.requests,[{uID:e}],"uID"),this.requests.splice(this.requests.length),t&&(E().friends=m.a.concat(E().friends,n[1])))}})}}},S=F,A=(n("2611"),Object(b["a"])(S,q,P,!1,null,"88933b84",null)),D=A.exports,I=n("076e"),M={name:"v",components:{VHeader:o["a"],MessageBox:i["a"],AddFriend:_,FriendList:O,VRequests:D,VFooter:I["a"]},methods:{logged(){syt.logged||(window.location="/login")}}},$=M,C=Object(b["a"])($,s,a,!1,null,"33680ae0",null),V=C.exports;r["a"].config.productionTip=!1,new r["a"]({render:e=>e(V)}).$mount("#v")},"9e8b":function(e,t,n){},ed23:function(e,t,n){"use strict";var r=n("9e8b"),s=n.n(r);s.a}});
//# sourceMappingURL=friends.e81b68fc.js.map